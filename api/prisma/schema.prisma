// AIRYBO PHASE 1: CANONICAL SCHEMA
// Compliant with CIP Language Canon & PPA Claims
// Status: LIVE

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// CORE PRIMITIVE: The Interest Object (Claim 1)
// "A system... for capturing transient user interest... using ephemeral interest objects"
model InterestObject {
  id          String   @id @default(uuid())
  reference   String   // The ISBN or ID (Non-resolved)
  
  // BOUNDED SURFACE ASSOCIATION (Claim 1, Claim 8)
  // "Associating the interest object with a bounded interest surface"
  surfaceId   String   
  contextType String   // "Shortlist", "AirShelf", "SharedShelf"

  // TEMPORAL CONSTRAINTS (Claim 3)
  // "Automatically expiring... upon satisfaction of the temporal constraint"
  createdAt   DateTime @default(now())
  expiresAt   DateTime // Calculated at capture time (e.g., +12 hours)
  
  // STATUS (Active vs Expired)
  isActive    Boolean  @default(true)

  // EVENT ACKNOWLEDGMENT (Claim 6)
  // "Event-based acknowledgment indicating later access"
  openedAt    DateTime? // Null until "Air" is broken (deferred access)

  @@index([expiresAt])
  @@index([surfaceId])
}

// Note: No "User" model yet. Phase 1 is "Interest First," not "User First."
